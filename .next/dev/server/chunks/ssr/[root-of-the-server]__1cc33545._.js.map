{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/lib/mongodb.ts"],"sourcesContent":["// lib/mongodb.ts\nimport { MongoClient } from 'mongodb';\n\nif (!process.env.MONGODB_URI) {\n  throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"');\n}\n\nconst uri = process.env.MONGODB_URI;\nconst options = {};\n\nlet client;\nlet clientPromise: Promise<MongoClient>;\n\nif (process.env.NODE_ENV === 'development') {\n  // In development mode, use a global variable so that the value\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\n  let globalWithMongo = global as typeof globalThis & {\n    _mongoClientPromise?: Promise<MongoClient>\n  }\n  if (!globalWithMongo._mongoClientPromise) {\n    client = new MongoClient(uri, options);\n    globalWithMongo._mongoClientPromise = client.connect();\n  }\n  clientPromise = globalWithMongo._mongoClientPromise;\n} else {\n  // In production mode, it's best to not use a global variable.\n  client = new MongoClient(uri, options);\n  clientPromise = client.connect();\n}\n\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\nexport default clientPromise;\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;AACjB;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC5B,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,MAAM,UAAU,CAAC;AAEjB,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,+DAA+D;IAC/D,6EAA6E;IAC7E,IAAI;IAGJ,IAAI,CAAC,gBAAgB,mBAAmB,EAAE;QACxC,SAAS,IAAI,sHAAW,CAAC,KAAK;QAC9B,gBAAgB,mBAAmB,GAAG,OAAO,OAAO;IACtD;IACA,gBAAgB,gBAAgB,mBAAmB;AACrD;;uCAQe"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/lib/db.ts"],"sourcesContent":["import clientPromise from './mongodb';\nimport { Db } from 'mongodb';\n\nexport async function getDb(): Promise<Db> {\n  const client = await clientPromise;\n  return client.db();\n}\n"],"names":[],"mappings":";;;;AAAA;;AAGO,eAAe;IACpB,MAAM,SAAS,MAAM,yHAAa;IAClC,OAAO,OAAO,EAAE;AAClB"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/lib/server/auth.ts"],"sourcesContent":["\"use server\";\n\nimport { getDb } from \"@/lib/db\";\nimport type { User } from \"@/lib/types\";\nimport bcrypt from \"bcrypt\";\nimport { ObjectId } from \"mongodb\";\n\nasync function getUserCollection() {\n  const db = await getDb();\n  return db.collection<User>(\"users\");\n}\n\nexport async function login(email: string, password: string): Promise<User | null> {\n  const users = await getUserCollection();\n  const existingUser = await users.findOne({ email });\n\n  if (existingUser) {\n    // @ts-ignore\n    const passwordMatch = await bcrypt.compare(password, existingUser.password);\n    if (passwordMatch) {\n      const { password, _id, ...userWithoutPassword } = existingUser;\n      return {\n        id: _id.toString(),\n        ...userWithoutPassword,\n      } as User;\n    }\n  }\n  return null;\n}\n\nexport async function signup(email: string, password: string, name: string): Promise<User | null> {\n  const users = await getUserCollection();\n  const existingUser = await users.findOne({ email });\n\n  if (existingUser) {\n    return null;\n  }\n\n  const hashedPassword = await bcrypt.hash(password, 10);\n  const result = await users.insertOne({\n    _id: new ObjectId(),\n    email,\n    name,\n    password: hashedPassword,\n    provider: \"email\",\n    createdAt: new Date().toISOString(),\n  });\n\n  if (result.acknowledged) {\n    const newUser: User = {\n      id: result.insertedId.toString(),\n      email,\n      name,\n      provider: \"email\",\n      createdAt: new Date().toISOString(),\n    };\n    return newUser;\n  }\n\n  return null;\n}"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AACA;;;;;;AAEA,eAAe;IACb,MAAM,KAAK,MAAM,IAAA,kHAAK;IACtB,OAAO,GAAG,UAAU,CAAO;AAC7B;AAEO,eAAe,MAAM,KAAa,EAAE,QAAgB;IACzD,MAAM,QAAQ,MAAM;IACpB,MAAM,eAAe,MAAM,MAAM,OAAO,CAAC;QAAE;IAAM;IAEjD,IAAI,cAAc;QAChB,aAAa;QACb,MAAM,gBAAgB,MAAM,gHAAM,CAAC,OAAO,CAAC,UAAU,aAAa,QAAQ;QAC1E,IAAI,eAAe;YACjB,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,qBAAqB,GAAG;YAClD,OAAO;gBACL,IAAI,IAAI,QAAQ;gBAChB,GAAG,mBAAmB;YACxB;QACF;IACF;IACA,OAAO;AACT;AAEO,eAAe,OAAO,KAAa,EAAE,QAAgB,EAAE,IAAY;IACxE,MAAM,QAAQ,MAAM;IACpB,MAAM,eAAe,MAAM,MAAM,OAAO,CAAC;QAAE;IAAM;IAEjD,IAAI,cAAc;QAChB,OAAO;IACT;IAEA,MAAM,iBAAiB,MAAM,gHAAM,CAAC,IAAI,CAAC,UAAU;IACnD,MAAM,SAAS,MAAM,MAAM,SAAS,CAAC;QACnC,KAAK,IAAI,mHAAQ;QACjB;QACA;QACA,UAAU;QACV,UAAU;QACV,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,IAAI,OAAO,YAAY,EAAE;QACvB,MAAM,UAAgB;YACpB,IAAI,OAAO,UAAU,CAAC,QAAQ;YAC9B;YACA;YACA,UAAU;YACV,WAAW,IAAI,OAAO,WAAW;QACnC;QACA,OAAO;IACT;IAEA,OAAO;AACT;;;IAhDsB;IAkBA;;AAlBA,8WAAA;AAkBA,8WAAA"}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/.next-internal/server/app/dashboard/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {login as '60c2944c2b86070203cda4c6612465ef64fd9ed138'} from 'ACTIONS_MODULE0'\nexport {signup as '7054954da578b4443fc36110ab53469490db30e346'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0]}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"AAAA,+EAA+E;AAC/E,yEAAyE;AACzE,iEAAiE;;;;+BACjDA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,OAAc;IACrD,IAAK,IAAIC,IAAI,GAAGA,IAAID,QAAQE,MAAM,EAAED,IAAK;QACvC,MAAME,SAASH,OAAO,CAACC,EAAE;QACzB,IAAI,OAAOE,WAAW,YAAY;YAChC,MAAM,OAAA,cAEL,CAFK,IAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,OAAO,uEAAuE,CAAC,GADhJ,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF;IACF;AACF","ignoreList":[0]}}]
}