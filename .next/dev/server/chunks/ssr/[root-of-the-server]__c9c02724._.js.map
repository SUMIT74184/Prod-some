{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/lib/db.ts"],"sourcesContent":["\nimport mysql from 'mysql2/promise';\n\n// Create a connection pool\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  waitForConnections: true,\n  connectionLimit: 10,\n  queueLimit: 0\n});\n\n// Function to execute a query\nexport async function query(sql: string, values?: any[]) {\n  const [rows] = await pool.execute(sql, values);\n  return rows;\n}\n"],"names":[],"mappings":";;;;AACA;;AAEA,2BAA2B;AAC3B,MAAM,OAAO,4IAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,MAAM,QAAQ,GAAG,CAAC,OAAO;IACzB,UAAU,QAAQ,GAAG,CAAC,WAAW;IACjC,UAAU,QAAQ,GAAG,CAAC,WAAW;IACjC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;AAGO,eAAe,MAAM,GAAW,EAAE,MAAc;IACrD,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,OAAO,CAAC,KAAK;IACvC,OAAO;AACT"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///home/sumit/Desktop/Productivity/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\nimport type { User } from \"./types\"\nimport { query } from \"./db\" // Assuming './db' handles database interactions\nimport bcrypt from 'bcrypt'\n\n\ninterface AuthContextType {\n  user: User | null\n  isLoading: boolean\n  login: (email: string, password: string) => Promise<boolean>\n  signup: (email: string, password: string, name: string) => Promise<boolean>\n  loginWithProvider: (provider: \"google\" | \"facebook\" | \"github\") => Promise<boolean>\n  logout: () => void\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    // Check for existing session\n    const savedUser = localStorage.getItem(\"user\")\n    if (savedUser) {\n      setUser(JSON.parse(savedUser))\n    }\n    setIsLoading(false)\n  }, [])\n\n  const login = async (email: string, password: string): Promise<boolean> => {\n    const result: any = await query(\"SELECT * FROM users WHERE email = ?\", [email])\n    const existingUser = result[0]\n\n    if (existingUser) {\n      const passwordMatch = await bcrypt.compare(password, existingUser.password)\n      if (passwordMatch) {\n        const { password: _, ...userWithoutPassword } = existingUser\n        setUser(userWithoutPassword)\n        localStorage.setItem(\"user\", JSON.stringify(userWithoutPassword))\n        return true\n      }\n    }\n    return false\n  }\n\n  const signup = async (email: string, password: string, name: string): Promise<boolean> => {\n    const result: any = await query(\"SELECT * FROM users WHERE email = ?\", [email])\n    const existingUser = result[0]\n\n    if (existingUser) {\n      return false\n    }\n\n    const hashedPassword = await bcrypt.hash(password, 10)\n    const insertResult: any = await query(\n      \"INSERT INTO users (name, email, password, provider) VALUES (?, ?, ?, ?)\",\n      [name, email, hashedPassword, \"email\"]\n    )\n\n    if (insertResult.affectedRows > 0) {\n      const newUser: User = {\n        id: insertResult.insertId.toString(),\n        email,\n        name,\n        provider: \"email\",\n        createdAt: new Date().toISOString(),\n      }\n      setUser(newUser)\n      localStorage.setItem(\"user\", JSON.stringify(newUser))\n      return true\n    }\n\n    return false\n  }\n\n  const loginWithProvider = async (provider: \"google\" | \"facebook\" | \"github\"): Promise<boolean> => {\n    // Simulate OAuth login - in production, this would redirect to OAuth provider\n    const mockUser: User = {\n      id: Date.now().toString(),\n      email: `user@${provider}.com`,\n      name: `${provider.charAt(0).toUpperCase() + provider.slice(1)} User`,\n      provider,\n      createdAt: new Date().toISOString(),\n    }\n\n    setUser(mockUser)\n    localStorage.setItem(\"user\", JSON.stringify(mockUser))\n    return true\n  }\n\n  const logout = () => {\n    setUser(null)\n    localStorage.removeItem(\"user\")\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, login, signup, loginWithProvider, logout }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA,uLAA6B,gDAAgD;AAC7E;AANA;;;;;AAkBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACR,6BAA6B;QAC7B,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACb,QAAQ,KAAK,KAAK,CAAC;QACrB;QACA,aAAa;IACf,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,MAAM,SAAc,MAAM,IAAA,kHAAK,EAAC,uCAAuC;YAAC;SAAM;QAC9E,MAAM,eAAe,MAAM,CAAC,EAAE;QAE9B,IAAI,cAAc;YAChB,MAAM,gBAAgB,MAAM,gHAAM,CAAC,OAAO,CAAC,UAAU,aAAa,QAAQ;YAC1E,IAAI,eAAe;gBACjB,MAAM,EAAE,UAAU,CAAC,EAAE,GAAG,qBAAqB,GAAG;gBAChD,QAAQ;gBACR,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;gBAC5C,OAAO;YACT;QACF;QACA,OAAO;IACT;IAEA,MAAM,SAAS,OAAO,OAAe,UAAkB;QACrD,MAAM,SAAc,MAAM,IAAA,kHAAK,EAAC,uCAAuC;YAAC;SAAM;QAC9E,MAAM,eAAe,MAAM,CAAC,EAAE;QAE9B,IAAI,cAAc;YAChB,OAAO;QACT;QAEA,MAAM,iBAAiB,MAAM,gHAAM,CAAC,IAAI,CAAC,UAAU;QACnD,MAAM,eAAoB,MAAM,IAAA,kHAAK,EACnC,2EACA;YAAC;YAAM;YAAO;YAAgB;SAAQ;QAGxC,IAAI,aAAa,YAAY,GAAG,GAAG;YACjC,MAAM,UAAgB;gBACpB,IAAI,aAAa,QAAQ,CAAC,QAAQ;gBAClC;gBACA;gBACA,UAAU;gBACV,WAAW,IAAI,OAAO,WAAW;YACnC;YACA,QAAQ;YACR,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAC5C,OAAO;QACT;QAEA,OAAO;IACT;IAEA,MAAM,oBAAoB,OAAO;QAC/B,8EAA8E;QAC9E,MAAM,WAAiB;YACrB,IAAI,KAAK,GAAG,GAAG,QAAQ;YACvB,OAAO,CAAC,KAAK,EAAE,SAAS,IAAI,CAAC;YAC7B,MAAM,GAAG,SAAS,MAAM,CAAC,GAAG,WAAW,KAAK,SAAS,KAAK,CAAC,GAAG,KAAK,CAAC;YACpE;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,QAAQ;QACR,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,OAAO;IACT;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,aAAa,UAAU,CAAC;IAC1B;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAW;YAAO;YAAQ;YAAmB;QAAO;kBACtF;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}